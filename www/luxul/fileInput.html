<!-- 
fileInput
same as before except... 
added "onChange=..." to file input... 
and added <label for="controllerFirmware" class="narrow">no file selected</label> 
-->
<div class="control">
    <label for="controllerFirmware" class="narrow">Select File</label>
    <label 
    class="fileLabel" 
    id="fileLabel2" 
    for="controllerFirmware"
    >
      Choose File
    </label>
    <input 
    type="file" 
    accept="text/file" 
    id="controllerFirmware" 
    name="controllerFirmware" 
    class="file" 
    onChange="onChange_fileInput(this)"
    />
    <label for="controllerFirmware" class="narrow">no file selected</label>
    <div id="invalid_file">
        <div class="updateError">
            This is not a Luxul firmware file. File must have .lxl extension.
        </div>
    </div>
</div>



<script>
  var onChange_fileInput = function(e){ 
    // include this function once
    // then use anytime in <input type="file" />
    // file input must be followed directly by <label for="controllerFirmware" class="narrow">no file selected</label>
    var ext = e.value.split('.').pop();
    var p = e.nextElementSibling;
    p.innerHTML = e.value.replace(/^.*[\\\/]/, '');
    if (ext==="lxl") {
      // valid
      e.parentElement.classList.remove('error');
    } else {
      // invalid
      e.parentElement.classList.add('error');
    }
  }
</script>



<style>
  /* all */
  label#fileLabel2,
  input.file,
  #invalid_file,
  label.narrow {
      font-family: "Trebuchet MS", Helvetica, sans-serif;
      font-size: 13px;
  }
  /* each */
  label.narrow {
      color: #524E4C;
      margin-right: 20px;
  }
  label#fileLabel2 {
      background-color: #659520;
      border: 1px solid #659520;
      color: white;
      border-radius: 5px;
      padding: 7px 11px;
      min-width: 90px;
      margin: 0 10px 0 0;
  }
  input.file {
    display:none;
  }
  input.file + label.narrow {
      color: #659520;
  }
  #invalid_file {
    padding:20px 0;
    color:red;
    display:none;
  }
  /* error */
  .error input.file + label.narrow {
      color: red;
  }
  .error #invalid_file {
      display:block;
  }
</style>



