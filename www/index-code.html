<a name="scrollToCode"></a>
	
	
<article style="display:none;">
    <div class="title">
        ReactJS code on GitHub and NPM: 
    </div>
    <div>&nbsp;</div>

    <div class="description">
        * Custom <a href="https://github.com/paulshorey/mui-form/blob/master/src/exports/MuiSelect.js" target="_blank">&lt;Select /&gt;</a> and <a href="https://github.com/paulshorey/mui-form/blob/master/src/exports/MuiToggle.js" target="_blank">&lt;Toggle /&gt;</a> React components inheriting logic from the custom <a href="https://github.com/paulshorey/mui-form/blob/master/src/exports/MuiInput.js" target="_blank">&lt;Input /&gt;</a><br />
        * <a href="https://github.com/paulshorey/mui-form-example/blob/master/src/components/nav/Nav.js" target="_blank">&lt;Nav /&gt;</a> and <a href="https://github.com/paulshorey/mui-form-example/blob/master/src/components/nav/NavGroup.js" target="_blank">&lt;NavGroup /&gt;</a> using <a href="https://github.com/paulshorey/mui-form-example/blob/master/src/components/nav/NavStyled.js" target="_blank">Styled-Components</a><br />
        * <a href="https://github.com/paulshorey/mui-form-example/blob/master/src/devices/XWC1001/index.js" target="_blank">Multi-level routing</a> and <a href="https://github.com/paulshorey/mui-form-example/blob/master/src/App.js" target="_blank">neat code-splitting (lazy-loading) of routes</a> in a React/Redux app <br />
        * <a href="https://github.com/paulshorey/mui-form/blob/master/src/tests/MuiForm.test.js" target="_blank">Unit testing</a> automatically run <a href="https://github.com/paulshorey/mui-form/blob/master/package.json" target="_blank">before codebase committed to git</a>
    </div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
</article>


<article>

    <div class="title">
        AngularJS code samples:
    </div>
    <div class="article">
        <a href="https://repl.it/@paulshorey/rock-paper-scissors-combinations" target="_blank">Rock Paper Scissors</a><br />
        <a href="https://jsfiddle.net/paulshorey/nf4ksybb/" target="_blank">Clock hands UI &raquo;</a>
    </div>
    <div>&nbsp;</div>


    <div class="description">
        <span class="uui-text">How am I making <span class="uui-icon icon-pacman"></span> <b><span class="uui-icon icon-arrow-up"></span> this arrow?</b> or any other icons? <span class="uui-icon icon-cool2"></span> <span class="uui-icon icon-hipster2"></span></span>
    </div>
    <div class="span">
        <pre><code data-language="html">
<span class="uui-text">How am I making <span class="uui-icon icon-pacman"></span> <b><span class="uui-icon icon-arrow-up"></span> this arrow?</b> or any other icons? <span class="uui-icon icon-cool2"></span> <span class="uui-icon icon-hipster2"></span></span>
        </code></pre>
    </div>
    <!--<div class="description" style="margin:-5rem 1rem 1rem;color:grey;font-family:Courier;font-size:80%;line-height:80%;">
            <span>// The "uui-icon" class is optional, it is my own, to help align and size the icons with the text.</span><br />
            <span>// Other than that, it is a little CSS library that replaces "span class="icon..." with characters from a custom loaded font, into which you can upload and compile any custom SVG icon. This loads way faster and is much easier to manage than including a standard collection of many SVG icons, or even an image map.</span><br />
    </div>-->
    <div>&nbsp;</div>


    <div class="description">
        <span class="uui-text">AngularJS meets ReactJS:</a>
    </div>

    <div class="span">
        <pre><code data-language="html">
<div class="my-li-events" react-eventslist data="list.data"></div>
        </code></pre>
    </div>

    <div class="span">
        <pre><code data-language="javascript">
angular.module('appNyc.components', [])

.directive('reactEventslist', function (reactDirective, EventService,$timeout, $rootScope) {
return {
    restrict: 'A',
    scope: {
        data: '='
    },
    link: function (scope, element, attrs) {
        scope.vm = {};

        // load template -- react component
        scope.list_ready = function(){
            var query = {};
            query.category = scope.data.category;
            query.scene = scope.data.scene;
            query.time = scope.data.time;
            EventService.getEvents(query)
            .then(function (response) {
                scope.vm.events = response.data.data;

                ReactDOM.render(  
                    React.createElement(React.html.eventslist, {vm:scope.vm,data:scope.data}), 
                    angular.element(element)[0]
                );

            }, function (error) {
                console.error(error);
            });
        }

        // loading animation -- default state
        scope.list_reset = function(){
            scope.vm = {};
            ReactDOM.render( 
                React.createElement(React.html.eventslist_loading, {data:scope.data}), 
                angular.element(element)[0]
            );
            $timeout(function(){
                if (element) {
                    $(element).addClass('ready');
                }
            },1000);
        }
        scope.list_reset();

        // lazyload -- make API call only for content in view
        if (!$rootScope.lazyLoadedLists) {
            $rootScope.lazyLoadedLists = {};
        }
        scope.element = element;
        scope.$watch(
        function( scope ) {
            element = scope.element;
            var window_width = (window.innerWidth || document.documentElement.clientWidth);
            var rect = element[0].getBoundingClientRect();
            if (rect.left > 0 && rect.left < window_width) {

                if (!$rootScope.lazyLoadedLists[ scope.data.category ]) {
                    $rootScope.lazyLoadedLists[ scope.data.category ] = scope;
                    console.log('listing ',scope.data.category);
                    scope.list_ready()
                }

            } else {
                if ($rootScope.lazyLoadedLists[ scope.data.category ]) {
                    delete $rootScope.lazyLoadedLists[ scope.data.category ];
                    scope.list_reset();
                }
            }
        });

    }
}
})

;
        </code></pre>
        <pre><code data-language="jsx">
if (!React.html) {
React.html = {};
}
React.html['eventslist'] = React.createClass({
bindClick(e, link) {
    // Ionic opens href links in its own browser, this is to escape that. However, thinking of ditching Ionic for something faster like famo.us
    window.open(link, '_system');
    e.preventDefault();
},
render: function (events) {

    var rows = [];
    var old_timestring = '';
    for (var i=0; i < this.props.events.length; i++) {
        var event = this.props.events[i];
        if (!event.texts) {
            break;
        }
        var timestring = Date.create(event.timestamp).short();
        var todayEnd = moment().endOf('day').format('x');
        if (event.timestamp < todayEnd - 1) { // party must end before midnight, because we don't know when exactly tomorrow's dates are, most come in as 12:00am
            timestring = 'today';
        } else if (event.timestamp < todayEnd - 1 + 1000*60*60*24) {
            timestring = 'tomorrow';
        } else if (event.timestamp < todayEnd - 1 + 1000*60*60*24 *6) {
            timestring = 'this week';
        } else if (event.timestamp < todayEnd - 1 + 1000*60*60*24 *30) {
            timestring = 'this month';
        }

        // <timestring>
        if (timestring != old_timestring) {
            rows.push(<div className="events-timestamp"><span>{timestring}</span></div>);
            old_timestring = timestring;
        }

        // <subtext>
        var time = moment(event.timestamp).format('h:mma');
        if (time=='12:00am') {
            time = '';
        }
        var subtext = [];
        if (timestring.indexOf('week') != -1 || timestring.indexOf('month') != -1) {
            subtext.push(<span ng-click><span className="ion-calendar"></span> <span>{moment(event.timestamp).format('MMM D') +' '+time}</span></span>);
        } else if (time && time!='12:00am') {
            subtext.push(<span ng-click><span className="ion-calendar"></span> <span>{time}</span></span>);
        }
        subtext.push(<a className="subtext-source" href={event.source_link} target="_blank" ><span className="icon-link"></span>{event.source_host.substr(0, event.source_host.indexOf('.'))}</a>);

        // <row>
        rows.push(
        <div className="events-event">

            <div className="event-text">
                <span><a className="event-link" href={event.link} target="_blank">{event.texts[0]}</a></span>
                <span>{event.texts[1]}</span>
                <span>{event.texts[2]}</span>
            </div>
            <div className="event-subtext">
                {subtext}
            </div>

        </div>
        );
    }

    return <div className="my-events">{rows}</div>;
}
});
        </code></pre>
    </div>
</article>


<article>
    <div class="description">
        <span class="uui-text">AngularJS directives. Custom carousel, and scroll style events. Used in allevents.nyc homepage:</a>
    </div>
    <div class="span">
        <pre><code data-language="javascript">
.directive('scrollable', function ($timeout) {
return {
    restrict: 'A',
    scope: {
        which: '='
    },
    link: function (scope, element, attrs) {

        // to scroll or not to scroll
        scope.$watch(
            function () {
                if (scope.$parent.vm.listJustAdded) {
                    return scope.$parent.vm.listJustAdded;
                } else {
                    return false;
                }
            },
            function (newValue, oldValue) {
                // scroll to beginning
                if (newValue && newValue != oldValue) {
                    var target = element[0];
                    var duration = 400; // target.clientWidth / 2;

                    var scrollTo = 0;
                    target.doNotScroll = 'scroll--changed';
                    $timeout(function () {
                        $(target)
                            .animate({
                                scrollLeft: 0
                            }, {
                                duration: duration
                            });

                        $timeout(
                            scope.scrollCheck,
                            duration + 10
                        );

                    }, 100);
                }
            }
        );

        // the arrows
        $(element)
        .siblings('[scrollable-left]')
        .click(function () {
            var target = element[0];
            if (target.doNotScroll) {
                return;
            }
            var duration = 400;

            var scrollTo = target.scrollLeft - target.clientWidth;
            $(target)
                .animate({
                    scrollLeft: scrollTo
                }, {
                    duration: duration
                });

            target.doNotScroll = 'scrollable-left';
            $timeout(
                scope.scrollCheck,
                duration
            );
        });
        $(element)
        .siblings('[scrollable-right]')
        .click(function () {
            var target = element[0];
            if (target.doNotScroll) {
                return;
            }
            var duration = 400;

            var scrollTo = target.scrollLeft + target.clientWidth;
            $(target)
                .animate({
                    scrollLeft: scrollTo
                }, {
                    duration: duration
                });

            target.doNotScroll = 'scrollable-right';
            $timeout(
                scope.scrollCheck,
                duration
            );
        });

        // finish scroll position to nearest column or page
        scope.scrollfix = function(){
            var target = element[0];
            var duration = 200;
            if (target.doNotScroll) {
                return;
            }
            // what direction?
            var round = 'ceil';
            if (target.scrollLeft < target.scrollLeftLast) {
                round = 'floor';
            }
            // finish scrolling - to closest column
            var columns = Math[round](target.scrollLeft / target.firstElementChild.firstElementChild.clientWidth);
            var scrollTo = target.firstElementChild.firstElementChild.clientWidth * columns;
            // go
            $(target).animate({
                scrollLeft: scrollTo
            }, {
                duration: duration
            });
            // done
            target.doNotScroll = true;
            $timeout(
                scope.scrollCheck,
                duration
            );
        };
        $(element).scroll(function(){
            window.clearTimeout(scope.scrollfix_timeout);
            scope.scrollfix_timeout = window.setTimeout(function(){
                scope.scrollfix();
            },222); // timeout must be greater than duration of 
        });

        // ends - disable arrow when at beginning or end
        scope.scrollCheck = function () {
            var target = element[0];
            target.doNotScroll = false;
            target.scrollLeftLast = target.scrollLeft;
            if (target.scrollLeft<10) {
                $(element).siblings('[scrollable-left]').addClass('scrollEnd');
            } else {
                $(element).siblings('[scrollable-left]').removeClass('scrollEnd');
            }
            if (target.scrollLeft > ( target.scrollWidth - target.parentElement.scrollWidth - 10 ) ) {
                $(element).siblings('[scrollable-right]').addClass('scrollEnd');
            } else {
                $(element).siblings('[scrollable-right]').removeClass('scrollEnd');
            }
        };
        $timeout(
            scope.scrollCheck,
            500
        );
        $(window).on('resize',scope.scrollCheck);
        scope.$on('$destroy',function(){
            $(window).off('resize',scope.scrollCheck);
        });
    }
}
})
        </code></pre>
    </div>
</article>
    

<link href="/assets/js/rainbow/themes/monokai.css" rel="stylesheet" type="text/css">
<script src="/assets/js/rainbow/js/rainbow.min.js"></script>
<!-- <script src="/assets/js/rainbow/js/language/generic.js"></script>
<script src="/assets/js/rainbow/js/language/javascript.js"></script> -->
